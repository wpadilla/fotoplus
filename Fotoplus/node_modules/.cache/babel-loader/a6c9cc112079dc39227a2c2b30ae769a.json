{"ast":null,"code":"import _objectSpread from \"/Users/admin/Desktop/Projects/FotoplusProyectr/Fotoplus/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"/Users/admin/Desktop/Projects/FotoplusProyectr/Fotoplus/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport uuid from \"uuid/v4\";\nimport { ADD_TO_CART, DECREASE_QUANTITY, DELETE_FROM_CART, DELETE_ALL_FROM_CART } from \"../actions/cartActions\";\nvar initState = [];\n\nvar cartReducer = function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var cartItems = state,\n      product = action.payload;\n\n  if (action.type === ADD_TO_CART) {\n    // for non variant products\n    if (product.variation === undefined) {\n      var cartItem = cartItems.filter(function (item) {\n        return item.id === product.id;\n      })[0];\n\n      if (cartItem === undefined) {\n        return [].concat(_toConsumableArray(cartItems), [_objectSpread(_objectSpread({}, product), {}, {\n          quantity: product.quantity ? product.quantity : 1,\n          cartItemId: uuid()\n        })]);\n      } else {\n        return cartItems.map(function (item) {\n          return item.cartItemId === cartItem.cartItemId ? _objectSpread(_objectSpread({}, item), {}, {\n            quantity: product.quantity ? item.quantity + product.quantity : item.quantity + 1\n          }) : item;\n        });\n      } // for variant products\n\n    } else {\n      var _cartItem = cartItems.filter(function (item) {\n        return item.id === product.id && product.selectedProductColor && product.selectedProductColor === item.selectedProductColor && product.selectedProductSize && product.selectedProductSize === item.selectedProductSize && (product.cartItemId ? product.cartItemId === item.cartItemId : true);\n      })[0];\n\n      if (_cartItem === undefined) {\n        return [].concat(_toConsumableArray(cartItems), [_objectSpread(_objectSpread({}, product), {}, {\n          quantity: product.quantity ? product.quantity : 1,\n          cartItemId: uuid()\n        })]);\n      } else if (_cartItem !== undefined && (_cartItem.selectedProductColor !== product.selectedProductColor || _cartItem.selectedProductSize !== product.selectedProductSize)) {\n        return [].concat(_toConsumableArray(cartItems), [_objectSpread(_objectSpread({}, product), {}, {\n          quantity: product.quantity ? product.quantity : 1,\n          cartItemId: uuid()\n        })]);\n      } else {\n        return cartItems.map(function (item) {\n          return item.cartItemId === _cartItem.cartItemId ? _objectSpread(_objectSpread({}, item), {}, {\n            quantity: product.quantity ? item.quantity + product.quantity : item.quantity + 1,\n            selectedProductColor: product.selectedProductColor,\n            selectedProductSize: product.selectedProductSize\n          }) : item;\n        });\n      }\n    }\n  }\n\n  if (action.type === DECREASE_QUANTITY) {\n    if (product.quantity === 1) {\n      var remainingItems = function remainingItems(cartItems, product) {\n        return cartItems.filter(function (cartItem) {\n          return cartItem.cartItemId !== product.cartItemId;\n        });\n      };\n\n      return remainingItems(cartItems, product);\n    } else {\n      return cartItems.map(function (item) {\n        return item.cartItemId === product.cartItemId ? _objectSpread(_objectSpread({}, item), {}, {\n          quantity: item.quantity - 1\n        }) : item;\n      });\n    }\n  }\n\n  if (action.type === DELETE_FROM_CART) {\n    var _remainingItems = function _remainingItems(cartItems, product) {\n      return cartItems.filter(function (cartItem) {\n        return cartItem.cartItemId !== product.cartItemId;\n      });\n    };\n\n    return _remainingItems(cartItems, product);\n  }\n\n  if (action.type === DELETE_ALL_FROM_CART) {\n    return cartItems.filter(function (item) {\n      return false;\n    });\n  }\n\n  return state;\n};\n\nexport default cartReducer;","map":{"version":3,"sources":["/Users/admin/Desktop/Projects/FotoplusProyectr/Fotoplus/src/redux/reducers/cartReducer.js"],"names":["uuid","ADD_TO_CART","DECREASE_QUANTITY","DELETE_FROM_CART","DELETE_ALL_FROM_CART","initState","cartReducer","state","action","cartItems","product","payload","type","variation","undefined","cartItem","filter","item","id","quantity","cartItemId","map","selectedProductColor","selectedProductSize","remainingItems"],"mappings":"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","sourcesContent":["import uuid from \"uuid/v4\";\r\nimport {\r\n  ADD_TO_CART,\r\n  DECREASE_QUANTITY,\r\n  DELETE_FROM_CART,\r\n  DELETE_ALL_FROM_CART\r\n} from \"../actions/cartActions\";\r\n\r\nconst initState = [];\r\n\r\nconst cartReducer = (state = initState, action) => {\r\n  const cartItems = state,\r\n    product = action.payload;\r\n\r\n  if (action.type === ADD_TO_CART) {\r\n    // for non variant products\r\n    if (product.variation === undefined) {\r\n      const cartItem = cartItems.filter(item => item.id === product.id)[0];\r\n      if (cartItem === undefined) {\r\n        return [\r\n          ...cartItems,\r\n          {\r\n            ...product,\r\n            quantity: product.quantity ? product.quantity : 1,\r\n            cartItemId: uuid()\r\n          }\r\n        ];\r\n      } else {\r\n        return cartItems.map(item =>\r\n          item.cartItemId === cartItem.cartItemId\r\n            ? {\r\n                ...item,\r\n                quantity: product.quantity\r\n                  ? item.quantity + product.quantity\r\n                  : item.quantity + 1\r\n              }\r\n            : item\r\n        );\r\n      }\r\n      // for variant products\r\n    } else {\r\n      const cartItem = cartItems.filter(\r\n        item =>\r\n          item.id === product.id &&\r\n          product.selectedProductColor &&\r\n          product.selectedProductColor === item.selectedProductColor &&\r\n          product.selectedProductSize &&\r\n          product.selectedProductSize === item.selectedProductSize &&\r\n          (product.cartItemId ? product.cartItemId === item.cartItemId : true)\r\n      )[0];\r\n\r\n      if (cartItem === undefined) {\r\n        return [\r\n          ...cartItems,\r\n          {\r\n            ...product,\r\n            quantity: product.quantity ? product.quantity : 1,\r\n            cartItemId: uuid()\r\n          }\r\n        ];\r\n      } else if (\r\n        cartItem !== undefined &&\r\n        (cartItem.selectedProductColor !== product.selectedProductColor ||\r\n          cartItem.selectedProductSize !== product.selectedProductSize)\r\n      ) {\r\n        return [\r\n          ...cartItems,\r\n          {\r\n            ...product,\r\n            quantity: product.quantity ? product.quantity : 1,\r\n            cartItemId: uuid()\r\n          }\r\n        ];\r\n      } else {\r\n        return cartItems.map(item =>\r\n          item.cartItemId === cartItem.cartItemId\r\n            ? {\r\n                ...item,\r\n                quantity: product.quantity\r\n                  ? item.quantity + product.quantity\r\n                  : item.quantity + 1,\r\n                selectedProductColor: product.selectedProductColor,\r\n                selectedProductSize: product.selectedProductSize\r\n              }\r\n            : item\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  if (action.type === DECREASE_QUANTITY) {\r\n    if (product.quantity === 1) {\r\n      const remainingItems = (cartItems, product) =>\r\n        cartItems.filter(\r\n          cartItem => cartItem.cartItemId !== product.cartItemId\r\n        );\r\n      return remainingItems(cartItems, product);\r\n    } else {\r\n      return cartItems.map(item =>\r\n        item.cartItemId === product.cartItemId\r\n          ? { ...item, quantity: item.quantity - 1 }\r\n          : item\r\n      );\r\n    }\r\n  }\r\n\r\n  if (action.type === DELETE_FROM_CART) {\r\n    const remainingItems = (cartItems, product) =>\r\n      cartItems.filter(cartItem => cartItem.cartItemId !== product.cartItemId);\r\n    return remainingItems(cartItems, product);\r\n  }\r\n\r\n  if (action.type === DELETE_ALL_FROM_CART) {\r\n    return cartItems.filter(item => {\r\n      return false;\r\n    });\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nexport default cartReducer;\r\n"]},"metadata":{},"sourceType":"module"}